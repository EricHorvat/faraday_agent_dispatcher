{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Easier integrations with Faraday Agents \u00b6 Integrating systems is an elusive but mandatory job in any software product's life. Developers have to deal with languages they don't know, undocumented APIs or new paradigms. This leads to the fact that many product teams decide not to open the possibility to integrate to them. In Faraday \u2019s case, we are aware that integrations with other security tools are a critical part of our product. However, we\u2019ve realized that our Plugin system wasn't as easy as we expected to develop some integrations: it required some level of interactivity (either running a command from the console or importing a report), so it was hard to use on a periodic basis. It also forced integration developers to use our Python API, even when the tool to integrate with wasn't programmed in Python, making it harder for the developer. To solve this problem, we have the Faraday Agents ! You can use the getting started guide to use one of our official executors, or code and use one custom executor. Otherwise, you can check our technical section, to understand how the agents works.","title":"Home"},{"location":"#easier-integrations-with-faraday-agents","text":"Integrating systems is an elusive but mandatory job in any software product's life. Developers have to deal with languages they don't know, undocumented APIs or new paradigms. This leads to the fact that many product teams decide not to open the possibility to integrate to them. In Faraday \u2019s case, we are aware that integrations with other security tools are a critical part of our product. However, we\u2019ve realized that our Plugin system wasn't as easy as we expected to develop some integrations: it required some level of interactivity (either running a command from the console or importing a report), so it was hard to use on a periodic basis. It also forced integration developers to use our Python API, even when the tool to integrate with wasn't programmed in Python, making it harder for the developer. To solve this problem, we have the Faraday Agents ! You can use the getting started guide to use one of our official executors, or code and use one custom executor. Otherwise, you can check our technical section, to understand how the agents works.","title":"Easier integrations with Faraday Agents"},{"location":"418/","text":"418 - I'm a teapot \u00b6 This documentation is being build incrementally, so the page you were referenced, has not been done... yet","title":"418"},{"location":"418/#418-im-a-teapot","text":"This documentation is being build incrementally, so the page you were referenced, has not been done... yet","title":"418 - I'm a teapot"},{"location":"getting-started/","text":"Getting started \u00b6 Install \u00b6 pip $ pip install faraday_agent_dispatcher git $ git clone https://github.com/infobyte/faraday_agent_dispatcher.git $ cd faraday_agent_dispatcher $ pip install . Configure your agent \u00b6 The dispatcher can be configured with the wizard command: $ faraday-dispatcher config-wizard The wizard will ask for which configuration you would set, the agent configuration or the executors configuration . Agent configuration \u00b6 The proper configuration differ if you want to use a SSL connection with your Faraday server. When using SSL you can use a self signed certificate! Info The token required can be taken in the http(s):// {faraday_server_host} /#/admin/agents Your token is: ImalA8Cg1L6Z5Qbx2u9CFAsob Examples: https Example $ faraday-dispatcher config-wizard Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: A Section: server host [127.0.0.1]: ssl [True]: ssl_port [443]: Default SSL behavior? (Y, N): N ssl_cert []: Trying to save with empty value ssl_cert []: /home/path/to/the/cert.pub workspace [workspace]: sslWorkspace Section: tokens registration [ACorrectTokenIs25CharLen]: 1234567890123456789012345 Section: agent agent_name [agent]: sslAgent Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: Q http Example $ faraday-dispatcher config-wizard Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: A Section: server host [127.0.0.1]: ssl [True]: False api_port [5985]: websocket_port [9000]: workspace [workspace]: sslFalseWorkspace Section: tokens registration [ACorrectTokenIs25CharLen]: 1234567890123456789012345 Section: agent agent_name [agent]: sslFalseAgent Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: Q Warning We stronglly recommend to use https if not using within localhost Executors configuration \u00b6 When adding an executor you can set an executor with minimum configuration, which ones we maintain, call as official executor; or your own custom executors. In the next examples, you can see how to add a nessus executor, both as an official and custom executor: Official Example $ faraday-dispatcher config-wizard Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: E The actual configured executors are: [] Do you want to [A]dd, [M]odify or [D]elete an executor? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Name: official Is a custom executor? (Y, N) [N]: N The executors are: 1: wpscan.py 2: sublist3r.sh 3: nikto2.py 4: nessus.py 5: w3af.py +: Next page Q: Don't choose Choose one: 4 Max data sent to server [65536]: 65536 Environment variable NESSUS_USERNAME value: username Environment variable NESSUS_PASSWORD value: password Environment variable NESSUS_URL value: https://nessus_url.com The actual configured executors are: ['official'] Do you want to [A]dd, [M]odify or [D]elete an executor? Do you want to [Q]uit? (A, M, D, Q) [Q]: Q Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: Q Custom Example $ faraday-dispatcher config-wizard Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: E The actual configured executors are: [] Do you want to [A]dd, [M]odify or [D]elete an executor? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Name: custom Is a custom executor? (Y, N) [N]: Y Command to execute [exit 1]: python3 {REPO_FOLDER}/faraday_agent_dispatcher/static/executors/official/nessus.py Max data sent to server [65536]: 65536 The actual custom executor's environment variables are: [] Do you want to [A]dd, [M]odify or [D]elete an environment variable? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Environment variable name: NESSUS_USERNAME Environment variable value: username The actual custom executor's environment variables are: ['nessus_username'] Do you want to [A]dd, [M]odify or [D]elete an environment variable? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Environment variable name: NESSUS_PASSWORD Environment variable value: password The actual custom executor's environment variables are: ['nessus_username', 'nessus_password'] Do you want to [A]dd, [M]odify or [D]elete an environment variable? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Environment variable name: NESSUS_URL Environment variable value: https://nessus_url.com The actual custom executor's environment variables are: ['nessus_username', 'nessus_password', 'nessus_url'] Do you want to [A]dd, [M]odify or [D]elete an environment variable? Do you want to [Q]uit? (A, M, D, Q) [Q]: Q The actual custom executor's arguments are: [] Do you want to [A]dd, [M]odify or [D]elete an argument? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Argument name: NESSUS_SCAN_NAME Is mandatory? (Y, N): N The actual custom executor's arguments are: ['nessus_scan_name'] Do you want to [A]dd, [M]odify or [D]elete an argument? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Argument name: NESSUS_URL Is mandatory? (Y, N): N The actual custom executor's arguments are: ['nessus_scan_name', 'nessus_url'] Do you want to [A]dd, [M]odify or [D]elete an argument? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Argument name: NESSUS_SCAN_TARGET Is mandatory? (Y, N): Y The actual custom executor's arguments are: ['nessus_scan_name', 'nessus_url', 'nessus_scan_target'] Do you want to [A]dd, [M]odify or [D]elete an argument? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Argument name: NESSUS_SCAN_TEMPLATE Is mandatory? (Y, N): N The actual custom executor's arguments are: ['nessus_scan_name', 'nessus_url', 'nessus_scan_target', 'nessus_scan_template'] Do you want to [A]dd, [M]odify or [D]elete an argument? Do you want to [Q]uit? (A, M, D, Q) [Q]: Q The actual configured executors are: ['custom'] Do you want to [A]dd, [M]odify or [D]elete an executor? Do you want to [Q]uit? (A, M, D, Q) [Q]: Q Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: Q Warning Compared to the official executor example, this is more complex and ask for both arguments and configuration environment variables. We strongly recommend to read the custom executors technical section If you want to know how the executors work, you can check their technical section. Running the agent \u00b6 Start the agent \u00b6 The dispatcher can be configured with the run command: $ faraday-dispatcher run Expected output The expected output when the dispatcher run command is as follows $ faraday-dispatcher run INFO - token_registration_url: { faraday_host } /_api/v2/ws/agent2/agent_registration/ INFO - Registered successfully INFO - Connection to Faraday server succeeded Running an executor from faraday \u00b6 Go to https:// {faraday_server_host} /#/admin/agents Select your workspace in the dropdown Click Execute in the agent Select the executor and fill the arguments Click Run Expected output INFO - Parsing data: { \"execution_id\" : XX, \"agent_id\" : XX, \"action\" : \"RUN\" , \"executor\" : { EXECUTOR_NAME } , \"args\" : { EXECUTOR_ARGS }} INFO - Running { EXECUTOR_NAME } executor [ Executor data ] INFO - Executor { EXECUTOR_NAME } finished successfully Error output INFO - Parsing data: { \"execution_id\" : XX, \"agent_id\" : XX, \"action\" : \"RUN\" , \"executor\" : { EXECUTOR_NAME } , \"args\" : { EXECUTOR_ARGS }} INFO - Running { EXECUTOR_NAME } executor [ Executor data and errors ] WARNING - Executor { EXECUTOR_NAME } finished with exit code 1","title":"Getting started"},{"location":"getting-started/#getting-started","text":"","title":"Getting started"},{"location":"getting-started/#install","text":"pip $ pip install faraday_agent_dispatcher git $ git clone https://github.com/infobyte/faraday_agent_dispatcher.git $ cd faraday_agent_dispatcher $ pip install .","title":"Install"},{"location":"getting-started/#configure-your-agent","text":"The dispatcher can be configured with the wizard command: $ faraday-dispatcher config-wizard The wizard will ask for which configuration you would set, the agent configuration or the executors configuration .","title":"Configure your agent"},{"location":"getting-started/#agent-configuration","text":"The proper configuration differ if you want to use a SSL connection with your Faraday server. When using SSL you can use a self signed certificate! Info The token required can be taken in the http(s):// {faraday_server_host} /#/admin/agents Your token is: ImalA8Cg1L6Z5Qbx2u9CFAsob Examples: https Example $ faraday-dispatcher config-wizard Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: A Section: server host [127.0.0.1]: ssl [True]: ssl_port [443]: Default SSL behavior? (Y, N): N ssl_cert []: Trying to save with empty value ssl_cert []: /home/path/to/the/cert.pub workspace [workspace]: sslWorkspace Section: tokens registration [ACorrectTokenIs25CharLen]: 1234567890123456789012345 Section: agent agent_name [agent]: sslAgent Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: Q http Example $ faraday-dispatcher config-wizard Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: A Section: server host [127.0.0.1]: ssl [True]: False api_port [5985]: websocket_port [9000]: workspace [workspace]: sslFalseWorkspace Section: tokens registration [ACorrectTokenIs25CharLen]: 1234567890123456789012345 Section: agent agent_name [agent]: sslFalseAgent Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: Q Warning We stronglly recommend to use https if not using within localhost","title":"Agent configuration"},{"location":"getting-started/#executors-configuration","text":"When adding an executor you can set an executor with minimum configuration, which ones we maintain, call as official executor; or your own custom executors. In the next examples, you can see how to add a nessus executor, both as an official and custom executor: Official Example $ faraday-dispatcher config-wizard Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: E The actual configured executors are: [] Do you want to [A]dd, [M]odify or [D]elete an executor? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Name: official Is a custom executor? (Y, N) [N]: N The executors are: 1: wpscan.py 2: sublist3r.sh 3: nikto2.py 4: nessus.py 5: w3af.py +: Next page Q: Don't choose Choose one: 4 Max data sent to server [65536]: 65536 Environment variable NESSUS_USERNAME value: username Environment variable NESSUS_PASSWORD value: password Environment variable NESSUS_URL value: https://nessus_url.com The actual configured executors are: ['official'] Do you want to [A]dd, [M]odify or [D]elete an executor? Do you want to [Q]uit? (A, M, D, Q) [Q]: Q Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: Q Custom Example $ faraday-dispatcher config-wizard Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: E The actual configured executors are: [] Do you want to [A]dd, [M]odify or [D]elete an executor? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Name: custom Is a custom executor? (Y, N) [N]: Y Command to execute [exit 1]: python3 {REPO_FOLDER}/faraday_agent_dispatcher/static/executors/official/nessus.py Max data sent to server [65536]: 65536 The actual custom executor's environment variables are: [] Do you want to [A]dd, [M]odify or [D]elete an environment variable? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Environment variable name: NESSUS_USERNAME Environment variable value: username The actual custom executor's environment variables are: ['nessus_username'] Do you want to [A]dd, [M]odify or [D]elete an environment variable? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Environment variable name: NESSUS_PASSWORD Environment variable value: password The actual custom executor's environment variables are: ['nessus_username', 'nessus_password'] Do you want to [A]dd, [M]odify or [D]elete an environment variable? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Environment variable name: NESSUS_URL Environment variable value: https://nessus_url.com The actual custom executor's environment variables are: ['nessus_username', 'nessus_password', 'nessus_url'] Do you want to [A]dd, [M]odify or [D]elete an environment variable? Do you want to [Q]uit? (A, M, D, Q) [Q]: Q The actual custom executor's arguments are: [] Do you want to [A]dd, [M]odify or [D]elete an argument? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Argument name: NESSUS_SCAN_NAME Is mandatory? (Y, N): N The actual custom executor's arguments are: ['nessus_scan_name'] Do you want to [A]dd, [M]odify or [D]elete an argument? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Argument name: NESSUS_URL Is mandatory? (Y, N): N The actual custom executor's arguments are: ['nessus_scan_name', 'nessus_url'] Do you want to [A]dd, [M]odify or [D]elete an argument? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Argument name: NESSUS_SCAN_TARGET Is mandatory? (Y, N): Y The actual custom executor's arguments are: ['nessus_scan_name', 'nessus_url', 'nessus_scan_target'] Do you want to [A]dd, [M]odify or [D]elete an argument? Do you want to [Q]uit? (A, M, D, Q) [Q]: A Argument name: NESSUS_SCAN_TEMPLATE Is mandatory? (Y, N): N The actual custom executor's arguments are: ['nessus_scan_name', 'nessus_url', 'nessus_scan_target', 'nessus_scan_template'] Do you want to [A]dd, [M]odify or [D]elete an argument? Do you want to [Q]uit? (A, M, D, Q) [Q]: Q The actual configured executors are: ['custom'] Do you want to [A]dd, [M]odify or [D]elete an executor? Do you want to [Q]uit? (A, M, D, Q) [Q]: Q Do you want to edit the [A]gent or the [E]xecutors? Do you want to [Q]uit? (A, E, Q) [Q]: Q Warning Compared to the official executor example, this is more complex and ask for both arguments and configuration environment variables. We strongly recommend to read the custom executors technical section If you want to know how the executors work, you can check their technical section.","title":"Executors configuration"},{"location":"getting-started/#running-the-agent","text":"","title":"Running the agent"},{"location":"getting-started/#start-the-agent","text":"The dispatcher can be configured with the run command: $ faraday-dispatcher run Expected output The expected output when the dispatcher run command is as follows $ faraday-dispatcher run INFO - token_registration_url: { faraday_host } /_api/v2/ws/agent2/agent_registration/ INFO - Registered successfully INFO - Connection to Faraday server succeeded","title":"Start the agent"},{"location":"getting-started/#running-an-executor-from-faraday","text":"Go to https:// {faraday_server_host} /#/admin/agents Select your workspace in the dropdown Click Execute in the agent Select the executor and fill the arguments Click Run Expected output INFO - Parsing data: { \"execution_id\" : XX, \"agent_id\" : XX, \"action\" : \"RUN\" , \"executor\" : { EXECUTOR_NAME } , \"args\" : { EXECUTOR_ARGS }} INFO - Running { EXECUTOR_NAME } executor [ Executor data ] INFO - Executor { EXECUTOR_NAME } finished successfully Error output INFO - Parsing data: { \"execution_id\" : XX, \"agent_id\" : XX, \"action\" : \"RUN\" , \"executor\" : { EXECUTOR_NAME } , \"args\" : { EXECUTOR_ARGS }} INFO - Running { EXECUTOR_NAME } executor [ Executor data and errors ] WARNING - Executor { EXECUTOR_NAME } finished with exit code 1","title":"Running an executor from faraday"},{"location":"technical/arch/","text":"Architecture \u00b6 Faraday is a web application, the server is made with Python using Flask. Its possible to automatize tool usage with Faraday agents . Faraday server \u00b6 Faraday is accessed by a Web Browser or the Faraday Client . Both clients, communicate with Faraday Server via its REST API . The server has other main components as the Report Processor, or the Websocket Server. The latter provides information to the Client. Faraday agent \u00b6 The agent is an application composed by scripts discovering information, called executors . They can access any external services or use the Faraday's Report Processor. The data found by them is sent to the Faraday server by a middleware called Dispatcher , which will be the only module communicating with the server. Moreover, the Dispatcher is in charge of the scheduling of executors, backed by its implementation with asyncio . The Dispatcher uses the Faraday API to first communication and publishing the data, specially the bulk_create endpoint . In addition, the only communication via the websocket server are the commands from faraday, such as which executor will run and its arguments values, execution status updates, etc. The executors communicates by the standard output the data to publish, and by the standard error any information about the run.","title":"Architecture"},{"location":"technical/arch/#architecture","text":"Faraday is a web application, the server is made with Python using Flask. Its possible to automatize tool usage with Faraday agents .","title":"Architecture"},{"location":"technical/arch/#faraday-server","text":"Faraday is accessed by a Web Browser or the Faraday Client . Both clients, communicate with Faraday Server via its REST API . The server has other main components as the Report Processor, or the Websocket Server. The latter provides information to the Client.","title":"Faraday server"},{"location":"technical/arch/#faraday-agent","text":"The agent is an application composed by scripts discovering information, called executors . They can access any external services or use the Faraday's Report Processor. The data found by them is sent to the Faraday server by a middleware called Dispatcher , which will be the only module communicating with the server. Moreover, the Dispatcher is in charge of the scheduling of executors, backed by its implementation with asyncio . The Dispatcher uses the Faraday API to first communication and publishing the data, specially the bulk_create endpoint . In addition, the only communication via the websocket server are the commands from faraday, such as which executor will run and its arguments values, execution status updates, etc. The executors communicates by the standard output the data to publish, and by the standard error any information about the run.","title":"Faraday agent"}]}